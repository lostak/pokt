<html>
    <head>
        <meta charset="utf-8"/>
        <script src="wasm_exec.js"></script>
        <script>
            const go = new Go();
            WebAssembly.instantiateStreaming(fetch("json.wasm"), go.importObject).then((result) => {
                go.run(result.instance)
            });
        </script>
    </head>
    <body>
        <input id="button" type="submit" name="button" value="Print Portfolio" onClick="portfolioJSON()"\>
        <textarea name="jsonoutput" id="jsonoutput" cols="80" row="20"></textarea> 
    </body>
    <script>
        var portfolioJSON = function() {
            let result = formatPortfolioJSON()
            if ( (result != null) && ('error' in result)) {
                console.log("Error returned from Go: ", result['error'])
                jsonoutput.value = "";
                alert(result.error)
            } else {
                console.log("Go updated jsonoutput textarea")
            }
        }
    </script>
</html>